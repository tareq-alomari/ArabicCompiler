<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:ArabicIDE.CrossPlatform.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1000" d:DesignHeight="700"
        x:Class="ArabicIDE.CrossPlatform.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="Ù…ØªØ±Ø¬Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - Arabic Compiler IDE"
        Width="1000" Height="700">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <DockPanel>
        <!-- Menu Bar -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_Ù…Ù„Ù (File)" FontFamily="Arial">
                <MenuItem Header="Ø¬Ø¯ÙŠØ¯ (_New)" Command="{Binding NewFileCommand}" InputGesture="Ctrl+N" FontFamily="Arial"/>
                <MenuItem Header="ÙØªØ­ (_Open)..." Command="{Binding OpenFileCommand}" InputGesture="Ctrl+O" FontFamily="Arial"/>
                <MenuItem Header="Ø­ÙØ¸ (_Save)" Command="{Binding SaveFileCommand}" InputGesture="Ctrl+S" FontFamily="Arial"/>
                <MenuItem Header="Ø­ÙØ¸ Ø¨Ø§Ø³Ù… (_Save As)..." Command="{Binding SaveFileAsCommand}" InputGesture="Ctrl+Shift+S" FontFamily="Arial"/>
                <Separator/>
                <MenuItem Header="Ø®Ø±ÙˆØ¬ (E_xit)" Command="{Binding ExitCommand}" FontFamily="Arial"/>
            </MenuItem>
            <MenuItem Header="_ØªØ´ØºÙŠÙ„ (Run)" FontFamily="Arial">
                <MenuItem Header="ØªØ±Ø¬Ù… (_Compile)" Command="{Binding CompileCommand}" InputGesture="Ctrl+B" FontFamily="Arial"/>
                <MenuItem Header="Ø´ØºÙ‘Ù„ (_Run)" Command="{Binding RunCommand}" InputGesture="F5" FontFamily="Arial"/>
            </MenuItem>
        </Menu>

        <!-- Toolbar -->
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="10,5" Background="#F0F0F0">
            <Button Command="{Binding NewFileCommand}" Margin="5,0" Padding="10,5" ToolTip.Tip="Ø¬Ø¯ÙŠØ¯ (New)">
                <TextBlock Text="ðŸ“„ Ø¬Ø¯ÙŠØ¯" FontFamily="Arial"/>
            </Button>
            <Button Command="{Binding OpenFileCommand}" Margin="5,0" Padding="10,5" ToolTip.Tip="ÙØªØ­ (Open)">
                <TextBlock Text="ðŸ“‚ ÙØªØ­" FontFamily="Arial"/>
            </Button>
            <Button Command="{Binding SaveFileCommand}" Margin="5,0" Padding="10,5" ToolTip.Tip="Ø­ÙØ¸ (Save)">
                <TextBlock Text="ðŸ’¾ Ø­ÙØ¸" FontFamily="Arial"/>
            </Button>
            <Separator Width="2" Margin="10,0"/>
            <Button Command="{Binding CompileCommand}" Margin="5,0" Padding="15,8" ToolTip.Tip="ØªØ±Ø¬Ù… (Compile)">
                <TextBlock Text="âš™ï¸ ØªØ±Ø¬Ù…" FontFamily="Arial" FontWeight="Bold"/>
            </Button>
            <Button Command="{Binding RunCommand}" Margin="5,0" Padding="15,8" ToolTip.Tip="Ø´ØºÙ‘Ù„ (Run)">
                <TextBlock Text="â–¶ï¸ Ø´ØºÙ‘Ù„" FontFamily="Arial" FontWeight="Bold"/>
            </Button>
            <Separator Width="2" Margin="10,0"/>
            <TextBlock Text="{Binding StatusText}" 
                       FontFamily="Arial"
                       VerticalAlignment="Center"
                       Margin="20,0"/>
        </StackPanel>

        <!-- Main Content: Editor + Output Console -->
        <Grid DockPanel.Dock="Top">
            <Grid.RowDefinitions>
                <RowDefinition Height="2*"/>
                <RowDefinition Height="5"/>
                <RowDefinition Height="1*"/>
            </Grid.RowDefinitions>

            <!-- Code Editor -->
            <Border Grid.Row="0" BorderBrush="#CCCCCC" BorderThickness="1" Margin="10">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Editor Header -->
                    <Border Grid.Row="0" Background="#E8E8E8" Padding="8,4">
                        <TextBlock Text="{Binding CurrentFileName}" 
                                   FontFamily="Arial" 
                                   FontWeight="SemiBold"/>
                    </Border>
                    
                    <!-- Editor Content -->
                    <ScrollViewer Grid.Row="1">
                        <TextBox Text="{Binding EditorText}"
                                 AcceptsReturn="True"
                                 AcceptsTab="True"
                                 FontFamily="Arial"
                                 FontSize="14"
                                 FlowDirection="RightToLeft"
                                 TextAlignment="Right"
                                 Watermark="Ø§ÙƒØªØ¨ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ù‡Ù†Ø§... (Write Arabic code here...)"
                                 Background="White"
                                 BorderThickness="0"/>
                    </ScrollViewer>
                </Grid>
            </Border>

            <!-- Splitter -->
            <GridSplitter Grid.Row="1" 
                          Height="5" 
                          HorizontalAlignment="Stretch"
                          Background="#CCCCCC"/>

            <!-- Output Console -->
            <Border Grid.Row="2" BorderBrush="#CCCCCC" BorderThickness="1" Margin="10,0,10,10">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Console Header -->
                    <Border Grid.Row="0" Background="#2D2D2D" Padding="8,4">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ“‹ Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª (Output)" 
                                       Foreground="White"
                                       FontFamily="Arial" 
                                       FontWeight="SemiBold"/>
                            <Button Content="ðŸ—‘ï¸ Ù…Ø³Ø­" 
                                    Command="{Binding ClearOutputCommand}"
                                    FontFamily="Arial"
                                    FontSize="11"
                                    Padding="8,2"
                                    Margin="15,0,0,0"
                                    Background="#3D3D3D"
                                    Foreground="White"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- Console Content -->
                    <ScrollViewer Grid.Row="1">
                        <TextBox Text="{Binding OutputText}"
                                 IsReadOnly="True"
                                 AcceptsReturn="True"
                                 FontFamily="Arial"
                                 FontSize="12"
                                 FlowDirection="RightToLeft"
                                 TextAlignment="Right"
                                 Background="#1E1E1E"
                                 Foreground="#D4D4D4"
                                 BorderThickness="0"
                                 Watermark="Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„Ù…ØªØ±Ø¬Ù… Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§... (Compiler output will appear here...)"/>
                    </ScrollViewer>
                </Grid>
            </Border>
        </Grid>
    </DockPanel>

</Window>
